<!DOCTYPE html>
<html lang="en">
<head>
  <!-- meta data -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- title -->
  <title>my Profile</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

<!-- Navbar -->
<div class="loadNavbar"></div>

<!-- actual body -->

<div class="container-fluid shadow border mt-3 mb-3 ">
  <div class="row mt-auto mb-auto pb-3 justify-content-center">

    <h2 class="display-6 text-center pb-3">My Profile Overview</h2>

    <div class="table-scroll">

      <!-- responsive table display -->
      <div class="col-md-12 align-middle table-responsive ">

        <table class="table table-bordered table-hover table-striped align-middle" >
          <thead>

          <tr>

            <th>User ID</th>
            <th>Username</th>
            <th>Firstname</th>
            <th>Surname</th>
            <th>E-Mail</th>
            <th>Address</th>
            <th>Postalcode</th>
            <th>City</th>
            <th>Created at</th>
            <th>Status</th>
          </tr>
          </thead>

          <tr id="profileTable0">

          </tr>

        </table>

        </div>
      </div>


    <h2 class="display-6 text-center pb-3">Change Profile Data</h2>

    <div class="container-fluid d-flex justify-content-center mt-auto">

      <div class="col-md-8 d-flex justify-content-center mt-auto" >

        <form method="post" class="row g-3 needs-validation" id="profileData" novalidate>

          <div class="col-md-3">
            <label for="usernameUpdate" class="form-label">Username:</label>
            <input type="text" class="form-control" id="usernameUpdate" required>
            <div class="valid-feedback">Looks good!</div>
          </div>

          <div class="col-md-3">
            <label class="form-label" for="passwordUpdate">Password:</label>
            <input type="password" class="form-control" id="passwordUpdate" required>
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">The supplied passwords are empty or do not match.</div>
          </div>

          <div class="col-md-3">
            <label class="form-label" for="emailUpdate">E-Mail:</label>
            <input type="email" class="form-control" id="emailUpdate" required>
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please choose valid Email.</div>
          </div>

          <div class="col-md-2">
            <label class="form-label" for="titleUpdate">Salutation</label>
            <select name="title" id="titleUpdate" class="form-select" required>
              <option disabled selected value >-- Please select --</option>
              <option value="Mr.">Mr</option>
              <option value="Mrs.">Mrs.</option>
              <option value="Diverse">Diverse</option>
            </select>
            <div class="invalid-feedback">Please select a salutation.</div>
          </div>

          <div class="col-md-5">
            <label class="form-label" for="firstNameUpdate">First Name:</label>
            <input type="text" name="firstName" id="firstNameUpdate" class="form-control" required>
            <div class="valid-feedback">Looks good!</div>
          </div>

          <div class="col-md-5">
            <label class="form-label" for="lastNameUpdate">Last Name:</label>
            <input type="text" name="lastName" id="lastNameUpdate" class="form-control" required>
            <div class="valid-feedback">Looks good!</div>
          </div>

          <div class="col-md-6">
            <label class="form-label" for="addressUpdate">Address:</label>
            <input type="text" name="address" id="addressUpdate" class="form-control" required>
            <div class="invalid-feedback">Please provide a valid address.</div>
          </div>

          <div class="col-md-4">
            <label class="form-label" for="cityUpdate">City:</label>
            <input type="text" name="city" id="cityUpdate" class="form-control" required>
            <div class="invalid-feedback">Please provide a valid city.</div>
          </div>

          <div class="col-md-2">
            <label class="form-label" for="postalCodeUpdate">Postal Code:</label>
            <input type="text" name="postalCode" id="postalCodeUpdate" class="form-control" required>
            <div class="invalid-feedback">Please provide a valid zip.</div>
          </div>


          <div class="col-12">
            <button class="btn btn-primary" type="submit" id ="btnRegisterUserClicked">Submit form</button>
          </div>
          <div class="text-center">
            <div id="updateMessage"></div>
          </div>
        </form>
      </div>
    </div>

      <h2 class="display-6 text-center pb-3">Order History</h2>

    <div class="table-scroll">

      <!-- responsive table display -->
      <div class="col-md-12 align-middle table-responsive ">

        <table class="table table-bordered table-hover table-striped align-middle" >
          <thead>

          <tr>

            <th>User ID</th>
            <th>orderID</th>
            <th>productID</th>
            <th>product</th>
            <th>price</th>
            <th>orderPackage</th>
            <th>orderDate</th>
          </tr>
          </thead>

          <tr id="orderTable0">

          </tr>

        </table>
      </div>

    </div>
  </div>
</div>

<div include-footer="footer.html"></div>
</body>

<!-- js -->
<!-- js -->
<!-- include jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- include js file -->
<!--<script src="../js/script.js"></script>-->
<script src="../js/loadNavbar.js"></script>
<script src="../js/profile.js"></script>
<script src="../js/orderManagement.js"></script>

<!-- include js bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

<script>
  //load navbar
  loadNavbar();

  //load profile data
  let loggedInUser = readSessionCookie(getCookie()).username

  console.log(loggedInUser)

  if (loggedInUser !== null) {
    loadProfile(loggedInUser);
  } else {
    window.location.href = '../index.html';
  }


</script>
</html>